:root {
  --bg-root: #0a0d12;
  --bg-shell: #0f131a;
  --bg-panel: #121720;
  --bg-card: #151b26;
  --bg-input: #111722;
  --border: #2a3242;
  --border-soft: #333e52;
  --text-main: #eaf0fb;
  --text-muted: #8d9ab0;
  --accent: #ff7b1a;
  --accent-dark: #10182a;
  --ok: #4ed48f;
  --warn: #ffb257;
  --bad: #ff6e7c;
}

* {
  box-sizing: border-box;
  scrollbar-width: thin;
  scrollbar-color: #4b5a76 #141b27;
}

*::-webkit-scrollbar {
  width: 9px;
  height: 9px;
}

*::-webkit-scrollbar-track {
  background: #141b27;
  border-radius: 999px;
}

*::-webkit-scrollbar-thumb {
  border-radius: 999px;
  border: 2px solid #141b27;
  background: #4b5a76;
}

*::-webkit-scrollbar-thumb:hover {
  background: #617293;
}

html,
body {
  margin: 0;
  width: 100%;
  height: 100%;
  background: var(--bg-root);
  color: var(--text-main);
  font-family: "SF Pro Display", "SF Pro Text", "Avenir Next", "Helvetica Neue", Helvetica, sans-serif;
  overflow: hidden;
}

.app-shell {
  width: calc(100% - 22px);
  height: calc(100% - 22px);
  margin: 11px;
  border: 1px solid var(--border);
  border-radius: 24px;
  background: var(--bg-shell);
  display: grid;
  grid-template-columns: minmax(285px, 22vw) minmax(0, 1fr) minmax(305px, 23vw);
  overflow: hidden;
}

.panel {
  height: 100%;
  overflow-y: auto;
  padding: 16px;
  background: var(--bg-panel);
}

.panel-left {
  border-right: 1px solid var(--border);
}

.panel-right {
  border-left: 1px solid var(--border);
}

.panel-header {
  margin-bottom: 12px;
}

.panel-header h1,
.panel-header h2 {
  margin: 0;
}

.panel-header h1 {
  font-size: 2rem;
  font-weight: 500;
  letter-spacing: 0.015em;
}

.panel-header h2 {
  font-size: 1.2rem;
  font-weight: 540;
}

.eyebrow {
  margin: 6px 0 0;
  font-size: 0.73rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: #aab7cd;
}

.compact {
  margin-bottom: 8px;
}

.card {
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--bg-card);
  padding: 12px;
  margin-bottom: 10px;
}

.card summary {
  cursor: pointer;
  list-style: none;
  font-size: 0.96rem;
  font-weight: 560;
  letter-spacing: 0.01em;
  margin: -2px 0 10px;
}

.card summary::-webkit-details-marker {
  display: none;
}

.card:not([open]) {
  padding-bottom: 8px;
}

.card:not([open]) summary {
  margin-bottom: 0;
}

.card-priority {
  border-color: #3f4c63;
}

.device-focus {
  border-color: #4e6184;
  box-shadow: inset 0 0 0 1px rgba(143, 182, 255, 0.16);
  background: linear-gradient(180deg, #182232 0%, #151b26 100%);
}

.device-focus summary {
  color: #f0f5ff;
  font-weight: 620;
}

.focus-note {
  margin: 0 0 8px;
  color: #bdcce4;
  font-size: 0.75rem;
  line-height: 1.35;
}

.focus-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin: 0 0 10px;
}

.focus-tags span {
  border: 1px solid #45597d;
  border-radius: 999px;
  padding: 3px 8px;
  font-size: 0.67rem;
  color: #d8e7ff;
  letter-spacing: 0.03em;
  background: #20304a;
}

.card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 8px;
}

.card h2,
.card h3 {
  margin: 0;
  font-size: 0.96rem;
  font-weight: 560;
  letter-spacing: 0.01em;
}

.field-group {
  border: 1px solid var(--border-soft);
  border-radius: 11px;
  margin: 0 0 9px;
  padding: 8px;
}

.field-group legend {
  padding: 0 6px;
  color: #b8c7de;
  font-size: 0.7rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.assistive {
  margin: 0 0 8px;
  color: var(--text-muted);
  font-size: 0.72rem;
}

.field {
  display: grid;
  gap: 4px;
  margin-bottom: 7px;
}

.field:last-child {
  margin-bottom: 0;
}

.field span {
  color: var(--text-muted);
  font-size: 0.77rem;
}

input,
select,
button {
  font: inherit;
}

input[type='number'],
select {
  width: 100%;
  border: 1px solid var(--border-soft);
  border-radius: 10px;
  padding: 8px 10px;
  background: var(--bg-input);
  color: var(--text-main);
}

input[type='file'] {
  width: 100%;
  color: #d6e3f7;
  font-size: 0.8rem;
}

input[type='file']::file-selector-button {
  border: 1px solid var(--border-soft);
  border-radius: 9px;
  background: #1d2636;
  color: #e5eeff;
  padding: 7px 10px;
  margin-right: 10px;
  cursor: pointer;
}

input:focus-visible,
select:focus-visible,
button:focus-visible {
  outline: 2px solid #8fb6ff;
  outline-offset: 2px;
}

button {
  border: 1px solid var(--border-soft);
  border-radius: 12px;
  background: #1b2433;
  color: #eff4ff;
  padding: 8px 12px;
  font-weight: 550;
  cursor: pointer;
  transition: background 130ms ease;
}

button:hover {
  background: #243046;
}

#addButton {
  width: 100%;
  border-color: #374c71;
  background: #22314a;
}

.tertiary {
  width: auto;
  border-color: var(--border);
  background: #192231;
  padding: 5px 9px;
  font-size: 0.74rem;
}

.toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  color: #dbe7ff;
  font-size: 0.84rem;
}

.toggle input {
  width: 16px;
  height: 16px;
}

.status-line {
  margin: 6px 0;
  color: #dce8fe;
  font-size: 0.8rem;
}

.warnings {
  margin-top: 7px;
  color: var(--warn);
  font-size: 0.76rem;
  line-height: 1.34;
}

#loadStatus,
#warnings {
  display: none;
}

.hint {
  margin: 6px 0 0;
  font-size: 0.74rem;
  color: var(--text-muted);
}

.animation-grid {
  display: grid;
  gap: 8px;
  margin-top: 8px;
}

.animation-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin: 2px 0 8px;
}

.animation-toolbar .hint {
  margin: 0;
  flex: 1;
  min-width: 0;
}

.animation-group {
  border: 1px solid #2b3448;
  border-radius: 10px;
  background: #111824;
  padding: 0;
  overflow: hidden;
}

.animation-subsection > summary {
  list-style: none;
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  padding: 9px 10px;
  font-size: 0.74rem;
  font-weight: 580;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: #b5c7e6;
  cursor: pointer;
  background: linear-gradient(180deg, #172131 0%, #131b27 100%);
  border-bottom: 1px solid #2a3448;
}

.animation-subsection > summary::-webkit-details-marker {
  display: none;
}

.animation-subsection > summary::before {
  content: '';
  width: 8px;
  height: 8px;
  border-right: 2px solid #9ab4d7;
  border-bottom: 2px solid #9ab4d7;
  transform: rotate(-45deg);
  transition: transform 120ms ease;
}

.animation-subsection[open] > summary::before {
  transform: rotate(45deg);
}

.animation-subsection:not([open]) > summary {
  border-bottom: 0;
}

.animation-clear {
  border-color: #355278;
  background: #182438;
  color: #d9e9ff;
  padding: 5px 9px;
  font-size: 0.69rem;
  letter-spacing: 0.03em;
  white-space: nowrap;
}

.animation-clear:hover {
  background: #20314b;
}

.animation-clear:disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

.animation-list {
  margin: 0;
  max-height: 146px;
  padding: 7px 8px 8px;
  padding-right: 3px;
}

.animation-option {
  position: relative;
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  min-height: 34px;
  border: 1px solid #2f3d56;
  border-radius: 10px;
  background: linear-gradient(180deg, #182131 0%, #131b29 100%);
  padding: 7px 9px;
  cursor: pointer;
  transition: border-color 120ms ease, background 120ms ease, box-shadow 120ms ease;
}

.animation-option:hover {
  border-color: #436187;
  background: linear-gradient(180deg, #1b2940 0%, #142033 100%);
}

.animation-option-input {
  position: absolute;
  inline-size: 1px;
  block-size: 1px;
  margin: 0;
  opacity: 0;
  pointer-events: none;
}

.animation-option-control {
  width: 16px;
  height: 16px;
  border: 1px solid #597394;
  border-radius: 5px;
  background: #0f1726;
  flex-shrink: 0;
  position: relative;
  box-shadow: inset 0 0 0 1px rgba(27, 43, 68, 0.8);
  transition: border-color 120ms ease, background 120ms ease, transform 100ms ease;
}

.animation-option-input[type='radio'] + .animation-option-control {
  border-radius: 999px;
}

.animation-option-control::after {
  content: '';
  position: absolute;
  inset: 3px;
  border-radius: 3px;
  background: radial-gradient(circle at 40% 30%, #95d1ff 0%, #6db7ff 48%, #3d85d9 100%);
  transform: scale(0.2);
  opacity: 0;
  transition: transform 120ms ease, opacity 120ms ease;
}

.animation-option-input[type='radio'] + .animation-option-control::after {
  border-radius: 999px;
}

.animation-option-input:checked + .animation-option-control {
  border-color: #79b5ff;
  background: #13233b;
}

.animation-option-input:checked + .animation-option-control::after {
  transform: scale(1);
  opacity: 1;
}

.animation-option-text {
  color: #e5efff;
  line-height: 1.3;
  letter-spacing: 0.01em;
}

.animation-option-input:checked ~ .animation-option-text {
  color: #f2f7ff;
}

.animation-option:has(.animation-option-input:checked) {
  border-color: #5e91cc;
  background: linear-gradient(180deg, #1f3150 0%, #17253d 100%);
  box-shadow: 0 0 0 1px rgba(123, 177, 255, 0.2);
}

.animation-option:has(.animation-option-input:focus-visible) {
  outline: 2px solid #8fb6ff;
  outline-offset: 1px;
}

.animation-empty {
  color: var(--text-muted);
}

.attachment-group-item {
  border-bottom: 0 !important;
  padding: 0 !important;
}

#attachmentList > li + li {
  margin-top: 8px;
}

.attachment-single-item {
  border-bottom: 0 !important;
  padding: 0 !important;
}

.attachment-group {
  border: 1px solid #2f3d56;
  border-radius: 10px;
  background: #111824;
  overflow: hidden;
}

.attachment-group-summary {
  list-style: none;
  margin: 0;
  padding: 9px 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.73rem;
  font-weight: 580;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: #b5c7e6;
  cursor: pointer;
  background: linear-gradient(180deg, #172131 0%, #131b27 100%);
  border-bottom: 1px solid #2a3448;
}

.attachment-group-summary::-webkit-details-marker {
  display: none;
}

.attachment-group-summary::before {
  content: '';
  width: 8px;
  height: 8px;
  border-right: 2px solid #9ab4d7;
  border-bottom: 2px solid #9ab4d7;
  transform: rotate(-45deg);
  transition: transform 120ms ease;
}

.attachment-group[open] > .attachment-group-summary::before {
  transform: rotate(45deg);
}

.attachment-group:not([open]) > .attachment-group-summary {
  border-bottom: 0;
}

.attachment-group-list {
  list-style: none;
  margin: 0;
  padding: 7px 8px 8px;
  max-height: 170px;
  overflow: auto;
  display: grid;
  gap: 6px;
}

.attachment-group-list li {
  border-bottom: 0;
  padding: 0;
}

.attachment-item {
  display: block;
  padding: 0;
}

.attachment-option {
  min-height: 32px;
}

.attachment-name {
  color: #dce8fe;
  min-width: 0;
  overflow-wrap: anywhere;
}

.pot-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin: 6px 0;
}

.button-row {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 7px;
  margin: 8px 0;
}

.badge {
  display: inline-block;
  margin: 4px 0;
  padding: 5px 10px;
  border-radius: 999px;
  font-size: 0.72rem;
  border: 1px solid transparent;
}

.badge-ok {
  background: rgba(78, 212, 143, 0.14);
  border-color: rgba(78, 212, 143, 0.4);
  color: #b8ffd7;
}

.badge-warn {
  background: rgba(255, 178, 87, 0.14);
  border-color: rgba(255, 178, 87, 0.4);
  color: #ffd7a0;
}

.badge-bad {
  background: rgba(255, 110, 124, 0.14);
  border-color: rgba(255, 110, 124, 0.4);
  color: #ffc4cd;
}

.badge-neutral {
  background: #202f47;
  border-color: #31496f;
  color: #deebff;
}

/* Keep status UI focused on mipmap eligibility + active mip. */
#renderResolutionTag,
#mipEstimateTag,
#perfTag {
  display: none;
}

.list,
.log-list {
  list-style: none;
  margin: 8px 0 0;
  padding: 0;
  max-height: 190px;
  overflow: auto;
}

.list li,
.log-list li {
  border-bottom: 1px solid #2b3448;
  padding: 6px 0;
  font-size: 0.78rem;
}

.list li:last-child,
.log-list li:last-child {
  border-bottom: 0;
}

.list button {
  width: 100%;
  text-align: left;
  border-radius: 10px;
  font-size: 0.78rem;
}

.history-list li {
  display: grid;
  grid-template-columns: 56px 1fr;
  gap: 8px;
  align-items: center;
}

.history-thumb {
  width: 56px;
  height: 56px;
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid #3a4864;
  background: #0f1522;
}

.history-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.history-content {
  display: grid;
  gap: 4px;
}

.history-header {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

.history-meta {
  color: var(--text-muted);
  font-size: 0.71rem;
}

.history-actions {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 6px;
}

.history-delete {
  background: #302235;
  border-color: #6c4463;
  color: #ffe0ea;
}

.history-active-badge {
  display: none;
  align-items: center;
  border: 1px solid #4a7f53;
  border-radius: 999px;
  background: rgba(68, 209, 126, 0.18);
  color: #bcf7cf;
  font-size: 0.68rem;
  padding: 2px 8px;
  white-space: nowrap;
}

.history-active-badge.is-active {
  display: inline-flex;
}

.log-list {
  max-height: 220px;
}

.log-list li {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.log-line-meta {
  color: #8ea2c1;
  font-size: 0.68rem;
}

.log-line-text {
  line-height: 1.35;
  color: #dce8fe;
}

.log-warn .log-line-text {
  color: #ffd8a6;
}

.log-error .log-line-text {
  color: #ffbec8;
}

.panel-log {
  white-space: pre-wrap;
  font-size: 0.72rem;
  line-height: 1.33;
  color: #dae6ff;
  border: 1px solid #303f59;
  border-radius: 11px;
  background: #101622;
  padding: 8px;
  margin: 8px 0 0;
  max-height: 188px;
  overflow: auto;
}

/* Keep scrolling in collapsible cards, but hide scrollbar chrome. */
.card .list,
.card .log-list,
.card .panel-log {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.card .list::-webkit-scrollbar,
.card .log-list::-webkit-scrollbar,
.card .panel-log::-webkit-scrollbar {
  width: 0;
  height: 0;
}

.stage-wrap {
  position: relative;
  min-width: 0;
  height: 100%;
  background: #0e141f;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.device-frame {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  max-width: 100%;
  max-height: 100%;
  transform-origin: center center;
  transition: transform 220ms ease, filter 220ms ease;
}

.device-shell {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  max-width: 100%;
  max-height: 100%;
}

.pixi-host {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: #10161f;
  background-image:
    radial-gradient(circle at 1px 1px, #202a3c 1.1px, transparent 1.2px),
    linear-gradient(rgba(58, 77, 108, 0.22) 1px, transparent 1px),
    linear-gradient(90deg, rgba(58, 77, 108, 0.22) 1px, transparent 1px);
  background-size: 20px 20px, 80px 80px, 80px 80px;
}

.pixi-host canvas {
  width: 100%;
  height: 100%;
  display: block;
  transform-origin: center center;
  transition: transform 140ms ease;
}

.screen-zoom-controls {
  position: absolute;
  right: 10px;
  bottom: 10px;
  z-index: 3;
  display: inline-flex;
  flex-direction: column;
  gap: 6px;
}

.screen-zoom-controls button {
  width: 30px;
  height: 30px;
  border-radius: 9px;
  border: 1px solid rgba(178, 201, 237, 0.52);
  padding: 0;
  font-size: 1rem;
  font-weight: 700;
  line-height: 1;
  color: #f0f7ff;
  background: rgba(9, 13, 20, 0.72);
  backdrop-filter: blur(5px);
}

.screen-zoom-controls button:hover {
  background: rgba(28, 39, 57, 0.85);
}

.screen-zoom-controls button:disabled {
  opacity: 0.45;
  cursor: default;
  background: rgba(9, 13, 20, 0.55);
}

.device-frame.mode-auto {
  width: 100%;
  height: 100%;
}

.device-frame.mode-auto .device-shell {
  width: 100%;
  height: 100%;
  border-radius: 0;
  border: 0;
  background: transparent;
  box-shadow: none;
}

.device-frame.mode-auto .pixi-host {
  border-radius: 0;
}

.device-frame.mode-auto .device-cutout,
.device-frame.mode-auto .device-home-indicator,
.device-frame.mode-auto .device-laptop-base {
  display: none;
}

.device-frame.mode-phone .device-shell {
  padding: 18px 14px 26px;
  border-radius: 44px;
  border: 1px solid #808999;
  background: linear-gradient(145deg, #d7dce7 0%, #b6bfcd 38%, #949fb2 100%);
  box-shadow:
    0 22px 50px rgba(0, 0, 0, 0.48),
    inset 0 1px 0 rgba(255, 255, 255, 0.78),
    inset 0 -1px 0 rgba(26, 34, 47, 0.3);
}

.device-frame.mode-phone .pixi-host {
  border-radius: 30px;
  overflow: hidden;
  border: 1px solid rgba(10, 13, 22, 0.45);
}

.device-frame.mode-phone .device-cutout {
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: min(38%, 145px);
  height: 29px;
  border-radius: 16px;
  background: radial-gradient(circle at 24% 42%, #2e3240 2px, #090b12 5px), #0a0d15;
  box-shadow: inset 0 -1px 0 rgba(255, 255, 255, 0.08), 0 4px 10px rgba(0, 0, 0, 0.38);
  pointer-events: none;
}

.device-frame.mode-phone .device-home-indicator {
  position: absolute;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 34%;
  height: 5px;
  border-radius: 999px;
  background: rgba(235, 243, 255, 0.86);
  pointer-events: none;
}

.device-frame.mode-tablet .device-shell {
  padding: 16px 14px 18px;
  border-radius: 32px;
  border: 1px solid #7f8aa0;
  background: linear-gradient(160deg, #cbd3e3 0%, #a2adbf 65%, #8b97ab 100%);
  box-shadow:
    0 24px 46px rgba(0, 0, 0, 0.43),
    inset 0 1px 0 rgba(255, 255, 255, 0.74),
    inset 0 -1px 0 rgba(15, 23, 39, 0.35);
}

.device-frame.mode-tablet .pixi-host {
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(9, 14, 22, 0.34);
}

.device-frame.mode-tablet .device-cutout {
  position: absolute;
  top: 7px;
  left: 50%;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  transform: translateX(-50%);
  background: radial-gradient(circle at 40% 34%, #3f4759 1px, #0b0f1a 6px);
  pointer-events: none;
}

.device-frame.mode-tablet .device-home-indicator,
.device-frame.mode-tablet .device-laptop-base {
  display: none;
}

.device-frame.mode-laptop .device-shell {
  padding: 18px 18px 22px;
  border-radius: 14px 14px 8px 8px;
  border: 1px solid #80889a;
  background: linear-gradient(170deg, #c9d0de 0%, #adb6c7 52%, #909bad 100%);
  box-shadow:
    0 18px 40px rgba(0, 0, 0, 0.42),
    inset 0 1px 0 rgba(255, 255, 255, 0.78),
    inset 0 -1px 0 rgba(24, 32, 46, 0.35);
}

.device-frame.mode-laptop .pixi-host {
  border-radius: 7px;
  overflow: hidden;
  border: 1px solid rgba(6, 10, 18, 0.62);
}

.device-frame.mode-laptop .device-cutout {
  position: absolute;
  top: 8px;
  left: 50%;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  transform: translateX(-50%);
  background: radial-gradient(circle at 45% 40%, #4a5163 1px, #101625 5px);
  pointer-events: none;
}

.device-frame.mode-laptop .device-home-indicator {
  display: none;
}

.device-frame.mode-laptop .device-laptop-base {
  width: min(124%, 980px);
  height: 20px;
  margin-top: -1px;
  border-radius: 0 0 16px 16px;
  border: 1px solid #80889a;
  border-top: 0;
  background: radial-gradient(ellipse at center top, rgba(243, 248, 255, 0.85) 0%, rgba(196, 204, 218, 0.5) 37%, rgba(148, 157, 176, 0.9) 100%);
  box-shadow:
    0 14px 22px rgba(0, 0, 0, 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.68);
  pointer-events: none;
}

.debug-overlay {
  position: absolute;
  top: 12px;
  right: 12px;
  max-width: min(38vw, 420px);
  background: rgba(7, 10, 16, 0.82);
  border: 1px solid #32405a;
  border-radius: 8px;
  padding: 8px;
  font-size: 0.75rem;
  line-height: 1.35;
  color: #d4e3ff;
  pointer-events: none;
  white-space: pre-wrap;
  z-index: 2;
}

@media (max-width: 1280px) {
  .app-shell {
    grid-template-columns: minmax(260px, 30vw) minmax(0, 1fr) minmax(280px, 34vw);
  }

  .button-row {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 1020px) {
  html,
  body {
    overflow: auto;
  }

  .app-shell {
    width: calc(100% - 14px);
    height: auto;
    min-height: calc(100% - 14px);
    margin: 7px;
    display: flex;
    flex-direction: column;
    border-radius: 18px;
  }

  .panel {
    width: 100%;
    max-height: none;
  }

  .panel-left {
    border-right: 0;
    border-bottom: 1px solid var(--border);
  }

  .panel-right {
    border-left: 0;
    border-top: 1px solid var(--border);
  }

  .stage-wrap {
    height: 52vh;
    min-height: 360px;
  }
}
